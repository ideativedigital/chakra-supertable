import { Meta, Canvas, Source } from "@storybook/blocks";
import * as BasicStories from "./SuperTableBasic.stories";
import * as SectionStories from "./SuperTableSection.stories";
import * as LoadingStories from "./SuperTableLoading.stories";

<Meta title="Introduction" />

# chakra-supertable

A composable, feature-rich table component for React built on top of [Chakra UI](https://chakra-ui.com/).

SuperTable provides a **compound component API** that makes it easy to build tables with loading states, empty states, collapsible sections, sortable columns, and search — all with full TypeScript support and accessibility built in.

---

## Features

- **Compound Components** — Compose tables from small, focused building blocks
- **Loading Skeletons** — Built-in skeleton patterns (`line`, `text`, `avatar`, `badge`, …)
- **Empty & Search States** — Automatic switching between empty, searching, and loaded views
- **Collapsible Sections** — Group rows with expandable/collapsible headers
- **Composable Sections** — Full control over section header layout via primitives
- **Sortable Columns** — Declarative sort direction with keyboard support
- **Search Bar** — Throttled search field with customisable placeholder
- **Accessible** — Keyboard navigation, ARIA attributes, and focus management
- **Type-safe** — Strict TypeScript types for every component and prop

---

## Installation

```bash
pnpm add chakra-supertable
# peer dependencies
pnpm add react @chakra-ui/react @emotion/react
```

---

## Quick Start

```tsx
import { SuperTable } from "chakra-supertable";

function UsersTable({ users, loading }) {
  return (
    <SuperTable.Root loading={loading}>
      <SuperTable.Head>
        <SuperTable.Th>Name</SuperTable.Th>
        <SuperTable.Th>Email</SuperTable.Th>
        <SuperTable.Th>Role</SuperTable.Th>
      </SuperTable.Head>

      <SuperTable.Body>
        {users.map((user) => (
          <SuperTable.Row key={user.id}>
            <SuperTable.Cell>{user.name}</SuperTable.Cell>
            <SuperTable.Cell>{user.email}</SuperTable.Cell>
            <SuperTable.Cell>{user.role}</SuperTable.Cell>
          </SuperTable.Row>
        ))}
      </SuperTable.Body>

      <SuperTable.Empty>No users found</SuperTable.Empty>
      <SuperTable.LoadingRows pattern={["line", "text", "badge"]} count={5} />
    </SuperTable.Root>
  );
}
```

---

## Live Examples

### Basic Table

A simple table with five rows. Use the Controls panel in the [full story](?path=/story/supertable-basic--minimal) to toggle `size`, `striped`, `showBorder`, and `interactive`.

<Canvas of={BasicStories.Minimal} />

### Loading Skeletons

Toggle loading on to see skeleton rows with customisable patterns. Visit the [Loading stories](?path=/story/supertable-loading--skeleton-rows) for more options.

<Canvas of={LoadingStories.SkeletonRows} />

### Collapsible Sections

Rows grouped into collapsible sections. Click a section header to expand or collapse it.

<Canvas of={SectionStories.Simple} />

---

## Component Map

```
SuperTable.Root              ← context provider + <table>
├── SuperTable.Head          ← <thead> with auto column counting
│   └── SuperTable.Th        ← <th> (sortable variant available)
├── SuperTable.Body          ← <tbody>
│   └── SuperTable.Row       ← <tr> that registers for item counting
│       └── SuperTable.Cell  ← <td>
├── SuperTable.SimpleSection ← convenience collapsible section (string title)
├── SuperTable.Section       ← composable section primitive
│   ├── SuperTable.SectionHeader
│   │   ├── SuperTable.SectionTitle
│   │   └── SuperTable.SectionCollapseTrigger
│   └── SuperTable.SectionContent
├── SuperTable.LoadingRows   ← skeleton rows (shown when loading + no data)
├── SuperTable.Loading       ← custom loading UI slot
├── SuperTable.Empty         ← empty state (shown when no data + not filtering)
├── SuperTable.Searching     ← search-empty state (shown when filtering + no results)
├── SuperTable.SearchBar     ← search bar container
│   └── SuperTable.SearchField  ← throttled search input
├── SuperTable.ScrollArea    ← horizontal scroll wrapper
└── SuperTable.Caption       ← <caption>
```

---

## Explore

Use the sidebar to browse all stories. Each component group includes:

- **Interactive controls** to tweak props in real time
- **Source code** panel showing the story source
- **Auto-generated docs** pages with prop tables

Happy building!
